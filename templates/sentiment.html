<html>

<head>
    <title>Sentiment</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="static/css/style.css?q={{ time }}">
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
        google.charts.load("current", { packages: ["corechart"] });
        google.charts.setOnLoadCallback(drawChart);
        var bullish = parseFloat('{{stock_twits[0]}}');
        var bearish = parseFloat('{{stock_twits[1]}}');
        var neutral = parseFloat('{{stock_twits[2]}}');
        function drawChart() {
            var data = google.visualization.arrayToDataTable([
                ['Sentiment', 'Value'],
                ['Bullish', bullish],
                ['Bearish', bearish],
                ['Neutral', neutral],

            ]);

            var options = {
                title: 'StockTwits',
                titleTextStyle: {
                    color: 'white',
                    fontName: 'Sans-Serif',
                    fontSize: 16,
                },
                pieHole: 0.4,
                height: 500,
                colors: ['#BFFCC6', '#FFF5BA', '#FFABAB'],
                backgroundColor: '#404754',
                legend: {
                    textStyle: { color: '#ABB2BF', fontName: 'Sans-Serif' },
                    position: 'center',
                    alignment: 'center'
                },

            };

            var chart = new google.visualization.PieChart(document.getElementById('stocktwitschart'));
            chart.draw(data, options);
        }
    </script>
    <script type="text/javascript">
        google.charts.load("current", { packages: ["corechart"] });
        google.charts.setOnLoadCallback(drawChart);
        var rsbullish = parseFloat('{{reddit_stock[0]}}');
        var rsbearish = parseFloat('{{reddit_stock[1]}}');
        var rsneutral = parseFloat('{{reddit_stock[2]}}');
        function drawChart() {
            var data = google.visualization.arrayToDataTable([
                ['Sentiment', 'Value'],
                ['Bullish', rsbullish],
                ['Bearish', rsbearish],
                ['Neutral', rsneutral],

            ]);

            var options = {
                title: 'r/stock',
                titleTextStyle: {
                    color: 'white',
                    fontName: 'Sans-Serif',
                    fontSize: 16,
                },
                pieHole: 0.4,
                height: 500,
                colors: ['#BFFCC6', '#FFF5BA', '#FFABAB'],
                backgroundColor: '#404754',
                legend: {
                    textStyle: { color: '#ABB2BF', fontName: 'Sans-Serif' },
                    position: 'center',
                    alignment: 'center'
                },
            };



            var chart = new google.visualization.PieChart(document.getElementById('redditstockchart'));
            chart.draw(data, options);
        }
    </script>
    <script type="text/javascript">
        google.charts.load("current", { packages: ["corechart"] });
        google.charts.setOnLoadCallback(drawChart);
        var rmbullish = parseFloat('{{reddit_market[0]}}');
        var rmbearish = parseFloat('{{reddit_market[1]}}');
        var rmneutral = parseFloat('{{reddit_market[2]}}');
        function drawChart() {
            var data = google.visualization.arrayToDataTable([
                ['Sentiment', 'Value'],
                ['Bullish', rmbullish],
                ['Bearish', rmbearish],
                ['Neutral', rmneutral],

            ]);

            var options = {
                title: 'r/stockmarket',
                titleTextStyle: {
                    color: 'white',
                    fontName: 'Sans-Serif',
                    fontSize: 16,
                },
                pieHole: 0.4,
                height: 500,
                colors: ['#BFFCC6', '#FFF5BA', '#FFABAB'],
                backgroundColor: '#404754',
                legend: {
                    textStyle: { color: '#ABB2BF', fontName: 'Sans-Serif' },
                    position: 'center',
                    alignment: 'center'
                },
            };

            var chart = new google.visualization.PieChart(document.getElementById('redditmarketchart'));
            chart.draw(data, options);
        }
    </script>
    <script type="text/javascript">
        google.charts.load("current", { packages: ["corechart"] });
        google.charts.setOnLoadCallback(drawChart);
        var totalbullish = parseFloat('{{total[0]}}');
        var totalbearish = parseFloat('{{total[1]}}');
        var totalneutral = parseFloat('{{100-total[0]-total[1]}}');
        function drawChart() {
            var data = google.visualization.arrayToDataTable([
                ['Genre'],
                ['', 60, 40, '']
            ]);
            var options = {
                width: 600,
                height: 400,
                legend: { position: 'top', maxLines: 3 },
                bar: { groupWidth: '75%' },
                isStacked: true
            };
            var options_fullStacked = {
                isStacked: 'percent',
                height: 300,
                legend: { position: 'top', maxLines: 3 },
                hAxis: {
                    minValue: 0,
                    ticks: [0, .3, .6, .9, 1]
                }
            };

            var chart = new google.visualization.PieChart(document.getElementById('redditmarketchart'));
            chart.draw(data, options);
        }
    </script>
</head>

<body>
    <h1 style="text-align: center;">{{name}}</h1>
    <div class="container">
        <div class="row">
            <div class="col">
                <div id="stocktwitschart" style="width: 400px; height: 300px;"></div>
            </div>
            <div class="col">
                <div id="redditstockchart" style="width: 400px; height: 300px;"></div>
            </div>
            <div class="col">
                <div id="redditmarketchart" style="width: 400px; height: 300px;"></div>
            </div>
        </div>
    </div>

    <section class="pt-5">
        <div class="container pt-5">
            <div class="card border-0 rounded shadow-sm">
                <div class="card-body p-5" style="background-color: #404754;">
                    <div class="row">
                        <div class="col-lg-6">
                            <h1 class="fw-bold">Overall: {{total[2]}}</h1>
                            <h2 style="color: whitesmoke">Bullish: {{total[0]}} </h2>
                            <h2 style="color: whitesmoke">Bearish: {{total[1]}} </h2>
                        </div>
                        <div class="col-lg-6"></div>
                    </div>
                </div>
            </div>
        </div>
    </section>

</body>

</html>